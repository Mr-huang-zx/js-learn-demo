<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script src="./js/moment.js"></script>
    <script>
        var arr = [

            {
                name: '小米1',
                value: 1,
                type: 2,
                date: '2018-06-07T08:00:01.589Z'
            },

            {
                name: '锤子T1',
                value: 1,
                type: 2,
                date: '2018-06-07T08:10:01.589Z'
            },

            {
                name: '小米2',
                value: 1,
                type: 4,
                date: '2018-06-07T20:00:01.589Z'
            },

            {
                name: '小米2',
                value: 4,
                type: 4,
                date: '2018-06-07T20:10:21.189Z'
            },

            {
                name: '小米4',
                value: 1,
                type: 4,
                date: '2018-06-07T08:00:01.560Z'
            },

            {
                name: '小米4',
                value: 2,
                type: 4,
                date: '2018-06-07T08:10:31.584Z'
            },

            {
                name: '小米6',
                value: 1,
                type: 3,
                date: '2018-06-07T08:00:01.589Z'
            },

            {
                name: '小米5s',
                value: 1,
                type: 4,
                date: '2018-06-07T08:00:01.589Z'
            },

            {
                name: '锤子T2',
                value: 1,
                type: 4,
                date: '2018-06-07T08:00:01.589Z'
            },

            {
                name: '锤子T1',
                value: 4,
                type: 4,
                date: '2018-06-07T08:06:01.589Z'
            },

            {
                name: '魅蓝note5',
                value: 1,
                type: 4,
                date: '2018-06-07T08:00:01.589Z'
            },

            {
                name: '魅蓝note2',
                value: 5,
                type: 4,
                date: '2018-06-02T08:07:01.589Z'
            },

            {
                name: '魅蓝note2',
                value: 6,
                type: 4,
                date: '2018-06-07T08:00:01.589Z'
            },

            {
                name: '魅蓝note3',
                value: 1,
                type: 4,
                date: '2018-06-05T08:00:01.589Z'
            },

            {
                name: '魅蓝note',
                value: 1,
                type: 4,
                date: '2018-06-07T08:00:01.589Z'
            },

            {
                name: 'oppor9',
                value: 7,
                type: 4,
                date: '2018-06-04T08:04:01.588Z'
            },

            {
                name: '华为p9',
                value: 1,
                type: 4,
                date: '2018-06-02T08:00:01.577Z'
            },

            {
                name: '华为p9',
                value: 2,
                type: 4,
                date: '2018-06-07T08:00:01.110Z'
            },

            {
                name: '华为p10',
                value: 1,
                type: 1,
                date: '2018-06-07T08:00:01.534Z'
            }

        ];
        
        printArray(arr)
       
        function printArray(arr) {
            // 请用您认为最优化的方式，将arr中的type为4的数据过滤出来
            const type4 = arr.filter(e => e.type === 4);

            // 然后按相同的 name + date（按天）合并value（value累加）
            const temp = [type4[0]]
            type4.forEach(e => {
                const index = temp.findIndex(i => i.name === e.name && i.date.slice(0, 10) === e.date.slice(0,10));
                if (index !== -1) {
                    temp[index].value += e.value
                } else {
                    temp.push(e)
                }
            })
            // 然后按 value 降序(从大到小)排序，
            // debugger
            temp.sort((a, b) => b.value - a.value);
            // 最后每行按照 "${name},${本地日期},售出${sum(value)}部" 的格式，如："小米2,2017年06月08日,售出5部", 打印(console.log)出来。
            temp.forEach(e => {
                const {
                    name,
                    value,
                    date
                } = e;
                // console.log(date)
                console.log(`${name},${moment(date).format('YYYY年MM月DD日')},售出${value}部`);
            })
        }
        

        var arrr = [{name:35},{name:21},{name:61}]
        arrr.sort((a,b)=>a.name - b.name)
        console.log(arrr)

        // var person = [{name:"Rom",age:12},{name:"Bob",age:22},{name:"Ma",age:5},{name:"Tony",age:25}]
 
        // // person.sort((a,b)=>{ return a.age-b.age})//升序
        
        // person.sort((a,b)=>{ return b.age-a.age})//降序

        // console.log(person)
    </script>
</body>

</html>